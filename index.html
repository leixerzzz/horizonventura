<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Horizon Ventura ‚Äî Luxury Caribbean Experiences</title>
    <style>
        :root {
            --navy: #001f2f;
            --ocean: #005f73;
            --coral: #ff7f50;
            --sunset: #ff4e50;
            --gold: #f9d423;
            --sand: #f4f1de;
            --white: #ffffff;
            --glass: rgba(255, 255, 255, 0.1);
            --shadow: 0 8px 32px rgba(0,0,0,0.3);
            --font: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: var(--font);
            background: var(--navy);
            color: var(--white);
            overflow-x: hidden;
            line-height: 1.4;
        }

        /* --- LOGO SYSTEM (SVG) --- */
        #mainLogo {
            width: 180px;
            height: auto;
            cursor: pointer;
        }

        /* --- MOBILE LAYOUT --- */
        header {
            position: fixed;
            top: 0; width: 100%;
            height: 70px;
            background: rgba(0, 31, 47, 0.85);
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            z-index: 1000;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .nav-icons { display: flex; gap: 15px; align-items: center; }
        .icon-btn { background: none; border: none; font-size: 24px; color: white; position: relative; }
        #cartBadge {
            position: absolute; top: -5px; right: -8px;
            background: var(--sunset); font-size: 10px;
            padding: 2px 5px; border-radius: 10px; font-weight: bold;
        }

        #app { padding-top: 80px; padding-bottom: 100px; min-height: 100vh; }

        .container { padding: 0 20px; max-width: 500px; margin: 0 auto; }

        /* --- AMIGO 3D GULL --- */
        #amigoContainer {
            position: fixed;
            bottom: 85px; right: 15px;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            pointer-events: none;
        }
        #amigoCanvas {
            width: 130px; height: 130px;
            pointer-events: auto;
            cursor: grab;
            filter: drop-shadow(0 10px 15px rgba(0,0,0,0.4));
        }
        #amigoBubble {
            background: white; color: var(--navy);
            padding: 10px 15px; border-radius: 15px;
            font-size: 13px; font-weight: 600;
            margin-bottom: 10px; max-width: 200px;
            box-shadow: var(--shadow);
            display: none; position: relative;
            pointer-events: auto;
        }
        #amigoBubble::after {
            content: ''; position: absolute; bottom: -8px; right: 20px;
            border-left: 8px solid transparent; border-right: 8px solid transparent;
            border-top: 8px solid white;
        }

        /* --- HERO & SECTIONS --- */
        .hero { text-align: center; padding: 40px 0; }
        .hero h1 { font-size: 28px; margin-bottom: 10px; background: linear-gradient(to right, #fff, var(--gold)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
       
        .section-title { font-size: 22px; margin-bottom: 20px; border-left: 4px solid var(--coral); padding-left: 10px; }

        /* --- CARDS --- */
        .card-grid { display: grid; grid-template-columns: 1fr; gap: 20px; }
       
        .country-card {
            height: 180px; border-radius: 20px; overflow: hidden;
            position: relative; box-shadow: var(--shadow);
            background-size: cover; background-position: center;
        }
        .card-overlay {
            position: absolute; inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            display: flex; flex-direction: column; justify-content: flex-end; padding: 15px;
        }

        .service-card {
            background: var(--glass); border-radius: 20px; overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .service-img { height: 160px; background-size: cover; background-position: center; }
        .service-info { padding: 15px; }
        .price-tag { color: var(--gold); font-weight: bold; font-size: 18px; }

        /* --- BUTTONS --- */
        .btn {
            display: block; width: 100%; padding: 15px; border-radius: 12px;
            text-align: center; font-weight: bold; border: none; cursor: pointer;
            font-size: 16px; transition: 0.3s; margin-top: 10px;
        }
        .btn-primary { background: linear-gradient(135deg, var(--sunset), var(--coral)); color: white; }
        .btn-secondary { background: rgba(255,255,255,0.1); color: white; }

        /* --- TABS / NAVIGATION --- */
        .bottom-nav {
            position: fixed; bottom: 0; width: 100%;
            height: 70px; background: var(--navy);
            display: flex; justify-content: space-around; align-items: center;
            border-top: 1px solid rgba(255,255,255,0.1); z-index: 1001;
        }

        /* --- MODALS --- */
        .modal {
            position: fixed; inset: 0; background: rgba(0,0,0,0.8);
            display: none; align-items: center; justify-content: center; z-index: 3000; padding: 20px;
        }
        .modal-content {
            background: #fff; color: #333; width: 100%; max-width: 400px;
            border-radius: 25px; padding: 25px; max-height: 80vh; overflow-y: auto;
        }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; font-size: 12px; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group select {
            width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd;
        }

        /* --- UTILS --- */
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.4s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

    <div id="loader" style="position:fixed;inset:0;background:var(--navy);z-index:9999;display:flex;align-items:center;justify-content:center;">
        <div style="text-align:center;">
            <div id="loaderLogo"></div>
            <p style="margin-top:20px; color: var(--gold);">Horizon Ventura...</p>
        </div>
    </div>

    <header>
        <div id="logoContainer">
            <svg id="mainLogo" viewBox="0 0 250 60">
                <defs>
                    <linearGradient id="sunGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#ff7e5f" />
                        <stop offset="100%" style="stop-color:#feb47b" />
                    </linearGradient>
                </defs>
                <circle cx="30" cy="30" r="25" fill="url(#sunGrad)" />
                <path d="M10,40 Q30,20 50,40" stroke="white" stroke-width="2" fill="none" opacity="0.5"/>
                <path d="M25,25 L35,22 L32,28 Z" fill="#001f2f" /> <text x="65" y="40" font-family="Arial" font-weight="900" font-size="22" fill="white">HORIZON</text>
                <text x="65" y="55" font-family="Arial" font-weight="400" font-size="12" fill="#ff7f50" letter-spacing="2">VENTURA</text>
            </svg>
        </div>
        <div class="nav-icons">
            <button class="icon-btn" onclick="toggleLang()"><span id="langLabel">EN</span></button>
            <button class="icon-btn" onclick="openCart()">üõí<span id="cartBadge">0</span></button>
        </div>
    </header>

    <div id="app">
        </div>

    <div id="amigoContainer">
        <div id="amigoBubble">Hello! I'm Gavi, let's explore!</div>
        <div id="amigoMenu" class="hidden" style="background:white; border-radius:15px; padding:10px; margin-bottom:10px; pointer-events:auto; box-shadow:var(--shadow);">
            <button class="btn btn-secondary" style="color:black; font-size:12px; padding:5px;" onclick="talkToWA()">Direct WhatsApp</button>
            <button class="btn btn-secondary" style="color:black; font-size:12px; padding:5px;" onclick="showHelp('tattoos')">Tattoo Info</button>
        </div>
        <canvas id="amigoCanvas"></canvas>
    </div>

    <nav class="bottom-nav">
        <button class="icon-btn" onclick="renderHome()">üè†</button>
        <button class="icon-btn" onclick="renderCountries()">üåç</button>
        <button class="icon-btn" onclick="renderReviews()">‚≠ê</button>
        <button class="icon-btn" onclick="openAdmin()">‚öôÔ∏è</button>
    </nav>

    <div id="globalModal" class="modal" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
        const state = {
            lang: 'en',
            cart: [],
            currentCountry: null,
            currentCity: null,
            giftClaimed: false,
            admin: false
        };

        const DATA = {
            countries: [
                {
                    id: 'cuba', name: 'Cuba', img: 'https://images.unsplash.com/photo-1500673922987-e212871fec22?q=80&w=1000',
                    cities: [
                        { id: 'holguin', name: 'Holgu√≠n (Guardalavaca)', services: ['snorkeling', 'windsurfing', 'classic-car', 'tattoo', 'airport-h'] },
                        { id: 'havana', name: 'Havana', services: ['classic-car', 'walking-tour', 'nightlife-v', 'tattoo', 'airport-h'] }
                    ]
                },
                {
                    id: 'mexico', name: 'Mexico', img: 'https://images.unsplash.com/photo-1512813588311-547437cc03b2?q=80&w=1000',
                    cities: [
                        { id: 'cancun', name: 'Canc√∫n', services: ['cenote', 'snorkeling', 'nightlife-v', 'airport-h'] },
                        { id: 'playa', name: 'Playa del Carmen', services: ['beach-club', 'tattoo', 'yacht'] }
                    ]
                },
                {
                    id: 'jamaica', name: 'Jamaica', img: 'https://images.unsplash.com/photo-1549640376-89f1d2c43b99?q=80&w=1000',
                    cities: [
                        { id: 'mobay', name: 'Montego Bay', services: ['catamaran', 'falls', 'reggae', 'airport-h'] }
                    ]
                }
            ],
            services: {
                'snorkeling': { title: 'Coral Reef Snorkeling', price: 85, img: 'https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=500', desc: 'Explore the Atlantic reefs with certified guides.' },
                'windsurfing': { title: 'Pro Windsurfing', price: 150, img: 'https://images.unsplash.com/photo-1504893524553-b8553f071dcb?w=500', desc: 'Equipment and 2h training session.' },
                'classic-car': { title: '1950s Chevy Tour', price: 210, img: 'https://images.unsplash.com/photo-1526726538690-5cbf956ae2fd?w=500', desc: 'Classic car with private chauffeur for 4h.' },
                'tattoo': { title: 'Pro Tattoo Studio', price: 120, img: 'https://images.unsplash.com/photo-1520974735194-ec3287df86f4?w=500', desc: 'International safety standards and top artists.' },
                'airport-h': { title: 'Airport Pickup VIP', price: 65, img: 'https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=500', desc: 'Private transfer from airport to your hotel.' },
                'cenote': { title: 'Secret Cenote Swim', price: 95, img: 'https://images.unsplash.com/photo-1518737003272-da4c01a505fd?w=500', desc: 'Private access to sacred Mayan cenotes.' },
                'catamaran': { title: 'Sunset Catamaran', price: 140, img: 'https://images.unsplash.com/photo-1534447677768-be436bb09401?w=500', desc: 'Open bar, DJ, and snorkeling in Jamaica.' }
            },
            trans: {
                en: { welcome: "Build Your Caribbean Experience", explore: "Explore Destinations", home: "Start Journey" },
                es: { welcome: "Crea Tu Experiencia Caribe√±a", explore: "Explorar Destinos", home: "Comenzar" }
            }
        };

        const app = document.getElementById('app');

        // --- CORE LOGIC ---
        function init() {
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                renderHome();
                checkGift();
            }, 1500);
            initAmigo();
        }

        function renderHome() {
            app.innerHTML = `
                <div class="container fade-in">
                    <div class="hero">
                        <h1>${DATA.trans[state.lang].welcome}</h1>
                        <p>Luxury travel curated by locals.</p>
                        <button class="btn btn-primary" onclick="renderCountries()">${DATA.trans[state.lang].explore}</button>
                    </div>
                    <div style="margin-top:20px;">
                        <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=800" style="width:100%; border-radius:25px; box-shadow:var(--shadow);">
                    </div>
                </div>
            `;
            amigoTalk("Welcome! I'm here to help you build the perfect trip.");
        }

        function renderCountries() {
            let html = `<div class="container fade-in"><h2 class="section-title">Select Destination</h2><div class="card-grid">`;
            DATA.countries.forEach(c => {
                html += `
                    <div class="country-card" style="background-image:url('${c.img}')" onclick="renderCities('${c.id}')">
                        <div class="card-overlay">
                            <h3>${c.name}</h3>
                        </div>
                    </div>
                `;
            });
            html += `</div></div>`;
            app.innerHTML = html;
            amigoTalk("Where are we going? Cuba and Mexico are very popular right now!");
        }

        function renderCities(countryId) {
            const country = DATA.countries.find(c => c.id === countryId);
            state.currentCountry = country;
            let html = `<div class="container fade-in"><h2 class="section-title">Cities in ${country.name}</h2><div class="card-grid">`;
            country.cities.forEach(city => {
                html += `
                    <button class="btn btn-secondary" style="text-align:left; padding:20px;" onclick="renderServices('${city.id}')">
                        üìç ${city.name}
                    </button>
                `;
            });
            html += `</div><button class="btn btn-secondary" onclick="renderCountries()">Back</button></div>`;
            app.innerHTML = html;
        }

        function renderServices(cityId) {
            const city = state.currentCountry.cities.find(c => c.id === cityId);
            state.currentCity = city;
            let html = `<div class="container fade-in"><h2 class="section-title">Available in ${city.name}</h2><div class="card-grid">`;
            city.services.forEach(sid => {
                const s = DATA.services[sid];
                html += `
                    <div class="service-card">
                        <div class="service-img" style="background-image:url('${s.img}')"></div>
                        <div class="service-info">
                            <h3>${s.title}</h3>
                            <p>${s.desc}</p>
                            <div class="price-tag">$${s.price} CAD</div>
                            <button class="btn btn-primary" onclick="openBooking('${sid}')">Book Now</button>
                        </div>
                    </div>
                `;
            });
            html += `</div><button class="btn btn-secondary" onclick="renderCities('${state.currentCountry.id}')">Back</button></div>`;
            app.innerHTML = html;
            amigoSetOutfit(cityId === 'holguin' ? 'beach' : 'tourist');
        }

        // --- BOOKING & CART ---
        function openBooking(sid) {
            const s = DATA.services[sid];
            const body = `
                <h2 style="color:var(--navy)">${s.title}</h2>
                <div class="form-group">
                    <label>How many people?</label>
                    <input type="number" id="bookQty" value="1" min="1">
                </div>
                <div class="form-group">
                    <label>Start Date</label>
                    <input type="date" id="bookDateS">
                </div>
                <div class="form-group">
                    <label>End Date</label>
                    <input type="date" id="bookDateE">
                </div>
                <p style="font-size:12px; margin-bottom:10px;">* Price: $${s.price} CAD per person/day.</p>
                <button class="btn btn-primary" onclick="addToCart('${sid}')">Add to Cart</button>
                <button class="btn btn-secondary" style="color:black" onclick="closeModal()">Cancel</button>
            `;
            showModal(body);
        }

        function addToCart(sid) {
            const qty = document.getElementById('bookQty').value;
            const ds = document.getElementById('bookDateS').value;
            const de = document.getElementById('bookDateE').value;
           
            if(!ds || !de) { alert("Please select dates"); return; }

            const diff = Math.ceil((new Date(de) - new Date(ds)) / (1000 * 60 * 60 * 24)) || 1;
            const service = DATA.services[sid];
           
            state.cart.push({
                ...service,
                qty: parseInt(qty),
                days: diff,
                total: service.price * qty * diff
            });

            updateCartBadge();
            closeModal();
            amigoTalk("Excellent! Added to your cart. Ready to checkout?");
        }

        function openCart() {
            let total = 0;
            let body = `<h2 style="color:var(--navy)">Your Cart</h2><hr style="margin:10px 0;">`;
            if(state.cart.length === 0) {
                body += `<p>Your cart is empty.</p>`;
            } else {
                state.cart.forEach((item, idx) => {
                    total += item.total;
                    body += `
                        <div style="margin-bottom:15px; border-bottom:1px solid #eee; padding-bottom:10px;">
                            <div style="display:flex; justify-content:space-between;">
                                <strong>${item.title}</strong>
                                <span>$${item.total}</span>
                            </div>
                            <small>${item.qty} guests x ${item.days} days</small>
                        </div>
                    `;
                });
                body += `<div style="display:flex; justify-content:space-between; font-weight:bold; font-size:20px;">
                            <span>Total</span><span>$${total} CAD</span>
                         </div>
                         <button class="btn btn-primary" onclick="checkout()">Confirm Booking</button>`;
            }
            body += `<button class="btn btn-secondary" style="color:black" onclick="closeModal()">Close</button>`;
            showModal(body);
        }

        function checkout() {
            const waMsg = encodeURIComponent(`Hello Horizon Ventura! I want to confirm my booking. Total: $${state.cart.reduce((a,b)=>a+b.total,0)} CAD.`);
            window.open(`https://wa.me/14376050912?text=${waMsg}`, '_blank');
        }

        // --- AMIGO ENGINE ---
        let amigoCtx, amigoState = { mood: 'happy', outfit: 'tourist' };
       
        function initAmigo() {
            const canvas = document.getElementById('amigoCanvas');
            amigoCtx = canvas.getContext('2d');
            canvas.width = 130; canvas.height = 130;
            animateAmigo();

            // Click Amigo
            canvas.addEventListener('click', () => {
                const menu = document.getElementById('amigoMenu');
                menu.classList.toggle('hidden');
                amigoTalk("How can I help you today?");
            });
        }

        function drawGull() {
            const ctx = amigoCtx;
            ctx.clearRect(0,0,130,130);
            const cx = 65, cy = 80;

            // 3D Shadow
            ctx.beginPath();
            ctx.ellipse(cx, cy+35, 30, 10, 0, 0, Math.PI*2);
            ctx.fillStyle = 'rgba(0,0,0,0.2)';
            ctx.fill();

            // Body (Gull)
            const bodyGrad = ctx.createRadialGradient(cx-10, cy-10, 5, cx, cy, 50);
            bodyGrad.addColorStop(0, '#fff');
            bodyGrad.addColorStop(1, '#e0e0e0');
            ctx.fillStyle = bodyGrad;
            ctx.beginPath();
            ctx.arc(cx, cy, 40, 0, Math.PI*2);
            ctx.fill();

            // Beak (Orange)
            ctx.fillStyle = '#ff9800';
            ctx.beginPath();
            ctx.moveTo(cx+35, cy);
            ctx.lineTo(cx+55, cy+5);
            ctx.lineTo(cx+35, cy+10);
            ctx.fill();

            // Sunglasses (Cool)
            ctx.fillStyle = '#222';
            ctx.fillRect(cx+5, cy-15, 15, 12);
            ctx.fillRect(cx+22, cy-15, 15, 12);
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.strokeRect(cx+5, cy-15, 15, 12);

            // Hat based on outfit
            if(amigoState.outfit === 'beach') {
                ctx.fillStyle = '#f9d423';
                ctx.fillRect(cx-30, cy-45, 60, 10); // Straw hat
            } else {
                ctx.fillStyle = '#005f73';
                ctx.beginPath();
                ctx.arc(cx, cy-35, 20, Math.PI, 0); // Cap
                ctx.fill();
            }

            // Wing animation
            const wingY = Math.sin(Date.now()/200)*5;
            ctx.fillStyle = '#ddd';
            ctx.beginPath();
            ctx.ellipse(cx-35, cy+wingY, 20, 10, -0.5, 0, Math.PI*2);
            ctx.fill();
        }

        function animateAmigo() {
            drawGull();
            requestAnimationFrame(animateAmigo);
        }

        function amigoTalk(msg) {
            const bubble = document.getElementById('amigoBubble');
            bubble.textContent = msg;
            bubble.style.display = 'block';
            setTimeout(() => bubble.style.display = 'none', 5000);
        }

        function amigoSetOutfit(o) { amigoState.outfit = o; }

        // --- UTILS ---
        function toggleLang() {
            state.lang = state.lang === 'en' ? 'es' : 'en';
            document.getElementById('langLabel').textContent = state.lang.toUpperCase();
            renderHome();
        }

        function updateCartBadge() {
            document.getElementById('cartBadge').textContent = state.cart.length;
        }

        function showModal(content) {
            document.getElementById('modalBody').innerHTML = content;
            document.getElementById('globalModal').style.display = 'flex';
        }

        function closeModal() { document.getElementById('globalModal').style.display = 'none'; }

        function checkGift() {
            if(!localStorage.getItem('hv_gift')) {
                const giftHtml = `
                    <div style="text-align:center;">
                        <h2 style="color:var(--sunset)">üéÅ Welcome Gift!</h2>
                        <p>Pick a free VIP gift for your first booking:</p>
                        <button class="btn btn-primary" onclick="claimGift('Tattoo Credit')">$100 Tattoo Credit</button>
                        <button class="btn btn-primary" onclick="claimGift('Airport Pickup')">Free Airport Pickup</button>
                        <button class="btn btn-primary" onclick="claimGift('Dinner')">Free Luxury Dinner</button>
                    </div>
                `;
                setTimeout(() => showModal(giftHtml), 2000);
            }
        }

        function claimGift(g) {
            localStorage.setItem('hv_gift', g);
            closeModal();
            amigoTalk(`Awesome! I've saved your ${g}. It will be applied at checkout.`);
        }

        function talkToWA() { window.open('https://wa.me/14376050912', '_blank'); }

        function renderReviews() {
            let html = `<div class="container fade-in"><h2 class="section-title">Traveler Reviews</h2>`;
            const reviews = [
                { name: "John D.", text: "The classic car tour in Havana was magical!", stars: 5 },
                { name: "Sophie L.", text: "Best snorkeling experience in Guardalavaca.", stars: 5 }
            ];
            reviews.forEach(r => {
                html += `
                    <div style="background:var(--glass); padding:15px; border-radius:15px; margin-bottom:10px;">
                        <strong>${r.name}</strong> ${"‚≠ê".repeat(r.stars)}
                        <p style="font-size:14px; opacity:0.8;">${r.text}</p>
                    </div>
                `;
            });
            html += `
                <div style="margin-top:20px;">
                    <textarea id="revText" style="width:100%; border-radius:10px; padding:10px;" placeholder="Leave a review..."></textarea>
                    <button class="btn btn-primary" onclick="alert('Review submitted!')">Post Review</button>
                </div>
            </div>`;
            app.innerHTML = html;
        }

        function openAdmin() {
            const pass = prompt("Admin Password:");
            if(pass === "HORIZON2026") {
                state.admin = true;
                showModal(`
                    <h2 style="color:var(--navy)">Admin CMS</h2>
                    <p>Edit Services & Prices</p>
                    <div class="form-group">
                        <label>Base Snorkeling Price</label>
                        <input type="number" id="admP" value="85">
                    </div>
                    <button class="btn btn-primary" onclick="alert('Saved!')">Update Platform</button>
                `);
            } else {
                alert("Unauthorized");
            }
        }

        // START
        init();

    </script>
</body>
</html>
